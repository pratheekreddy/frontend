{"ast":null,"code":"import _toConsumableArray from\"/home/user/projects/forumReact/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/user/projects/forumReact/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from'axios';import ReactTooltip from\"react-tooltip\";import\"./postcard.scss\";var PostCard=function PostCard(props,state){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showResources=_useState2[0],setShowResources=_useState2[1];var topics=[];var presento=[];var resorc=[];for(var i=0;i<props.topics.length;i++){topics.push(props.topics[i].SUB_TOPIC);presento.push(props.topics[i].USER_EMAIL);}for(var j=0;j<props.files.length;j++){var t=props.files[j].FILE_NAME.split('-');resorc.push([t[t.length-1],props.files[j].FILE_NAME]);}var presentors=_toConsumableArray(new Set(presento));topics=_toConsumableArray(new Set(topics));var str=topics.toString();var list=/*#__PURE__*/React.createElement(\"div\",null,presentors.map(function(presontor,i){var ref=\"mailto:\"+presontor;return/*#__PURE__*/React.createElement(\"li\",{key:i},/*#__PURE__*/React.createElement(\"a\",{style:{color:\"#868686\"},href:ref},presontor));}));var download=/*#__PURE__*/React.createElement(\"ul\",{className:\"downloads\"},/*#__PURE__*/React.createElement(\"h5\",{style:{\"margin-left\":\"10px\"}},\"Attachments\"),resorc.map(function(down,i){var tempName=down[0].split('.');return/*#__PURE__*/React.createElement(\"li\",{key:i},/*#__PURE__*/React.createElement(\"a\",{target:\"_blank\",rel:\"noopener noreferrer\",href:\"https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/file/download?filename=\"+down[1]},/*#__PURE__*/React.createElement(\"span\",null,tempName[1]),tempName[0]));}));var file;var formSubmit=function formSubmit(e){e.preventDefault();var formData=new FormData();formData.append('files',file);formData.append('session_id',props.session_id);var config={headers:{'content-type':'multipart/form-data'}};axios.post(\"https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/file/upload\",formData,config).then(function(response){// console.log(response)\nif(response.status===200){alert(response.data.status);}}).catch(function(error){});};var onChange=function onChange(e){file=e.target.files[0];formSubmit(e);};var emailicon=/*#__PURE__*/React.createElement(\"div\",{className:\"admin-notify\"},/*#__PURE__*/React.createElement(\"i\",{\"data-tip\":true,\"data-for\":\"emailTip\",className:\"boschicon-bosch-ic-mail\"}),/*#__PURE__*/React.createElement(ReactTooltip,{id:\"emailTip\",place:\"top\",effect:\"solid\"},\"Email Subscribers\"));return/*#__PURE__*/React.createElement(\"div\",{className:\"card\"},/*#__PURE__*/React.createElement(\"div\",{className:\"head\"},/*#__PURE__*/React.createElement(\"label\",null,props.index+1),/*#__PURE__*/React.createElement(\"strong\",null,str),/*#__PURE__*/React.createElement(\"span\",null,/*#__PURE__*/React.createElement(\"b\",null,props.date))),/*#__PURE__*/React.createElement(\"div\",{className:\"desc\"},props.description),/*#__PURE__*/React.createElement(\"div\",{className:\"presenters\"},/*#__PURE__*/React.createElement(\"h5\",null,\"Presented\\xA0by\"),list),/*#__PURE__*/React.createElement(\"div\",{className:\"upload\"},/*#__PURE__*/React.createElement(\"form\",{onSubmit:formSubmit},/*#__PURE__*/React.createElement(\"i\",{className:\"boschicon-bosch-ic-cloud-upload\"}),/*#__PURE__*/React.createElement(ReactTooltip,{id:\"uploadTip\",place:\"top\",effect:\"solid\"},\"Upload Attachments\"),/*#__PURE__*/React.createElement(\"input\",{\"data-tip\":true,\"data-for\":\"uploadTip\",type:\"file\",name:\"files\",onChange:onChange}),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}))),resorc&&resorc.length?/*#__PURE__*/React.createElement(\"div\",{className:\"resources\"},/*#__PURE__*/React.createElement(\"i\",{\"data-tip\":true,\"data-for\":\"attachmentsTip\",className:\"boschicon-bosch-ic-book\",onClick:function onClick(){var newVal=showResources?false:true;setShowResources(newVal);}}),/*#__PURE__*/React.createElement(ReactTooltip,{id:\"attachmentsTip\",place:\"top\",effect:\"solid\"},\"View Attachments\")):null,/*#__PURE__*/React.createElement(\"div\",null,showResources?download:null),/*#__PURE__*/React.createElement(\"div\",null,new Date(props.date)>new Date()?emailicon:null),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));};export default PostCard;","map":{"version":3,"sources":["/home/user/projects/forumReact/react_app/src/postcard/Postcard.js"],"names":["React","useState","axios","ReactTooltip","PostCard","props","state","showResources","setShowResources","topics","presento","resorc","i","length","push","SUB_TOPIC","USER_EMAIL","j","files","t","FILE_NAME","split","presentors","Set","str","toString","list","map","presontor","ref","color","download","down","tempName","file","formSubmit","e","preventDefault","formData","FormData","append","session_id","config","headers","post","then","response","status","alert","data","catch","error","onChange","target","emailicon","index","date","description","newVal","Date"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from 'axios'\r\nimport ReactTooltip from \"react-tooltip\";\r\n\r\nimport \"./postcard.scss\";\r\nconst PostCard = (props, state) => {\r\n  const [showResources, setShowResources] = useState(false);\r\n  let topics = [];\r\n  let presento = [];\r\n  let resorc = [];\r\n  for (let i = 0; i < props.topics.length; i++) {\r\n    topics.push(props.topics[i].SUB_TOPIC)\r\n    presento.push(props.topics[i].USER_EMAIL)\r\n  }\r\n  for (let j = 0; j < props.files.length; j++) {\r\n    let t=props.files[j].FILE_NAME.split('-')\r\n    resorc.push([t[t.length-1], props.files[j].FILE_NAME])\r\n  }\r\n  let presentors = [...new Set(presento)]\r\n  topics=[...new Set(topics)]\r\n  let str = topics.toString()\r\n\r\n  let list = (\r\n    <div>\r\n      {presentors.map((presontor, i) => {\r\n        let ref=\"mailto:\"+presontor\r\n        return <li key={i}><a style={{color:\"#868686\"}} href={ref}>{presontor}</a></li>\r\n      })}\r\n    </div>\r\n  )\r\n\r\n  let download = (\r\n    <ul className=\"downloads\">\r\n    {/*TODO: add heading*/}\r\n      <h5 style={{\"margin-left\": \"10px\"}}>Attachments</h5>\r\n      {resorc.map((down, i) => {\r\n        \r\n        const tempName = down[0].split('.');\r\n        return <li key={i}><a target=\"_blank\" rel=\"noopener noreferrer\" href={\"https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/file/download?filename=\" + down[1]}><span>{tempName[1]}</span>{tempName[0]}</a></li>\r\n      })}\r\n    </ul>\r\n  )\r\n  let file\r\n  let formSubmit = (e) => {\r\n    e.preventDefault();\r\n    const formData = new FormData();\r\n    formData.append('files', file);\r\n    formData.append('session_id', props.session_id)\r\n    const config = {\r\n      headers: {\r\n        'content-type': 'multipart/form-data'\r\n      }\r\n    };\r\n    axios.post(\"https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/file/upload\", formData, config)\r\n      .then((response) => {\r\n        // console.log(response)\r\n        if(response.status===200){\r\n        alert(response.data.status);}\r\n      }).catch((error) => {\r\n      });\r\n  }\r\n\r\n  let onChange = (e) => {\r\n    file = e.target.files[0];\r\n    formSubmit(e)\r\n  }\r\n\r\n  let emailicon=(\r\n    <div className=\"admin-notify\">\r\n        <i data-tip data-for=\"emailTip\" className=\"boschicon-bosch-ic-mail\"></i>\r\n          <ReactTooltip id=\"emailTip\" place=\"top\" effect=\"solid\">\r\n                Email Subscribers\r\n          </ReactTooltip>\r\n      </div>\r\n  )\r\n\r\n  return (\r\n    <div className=\"card\">\r\n      <div className=\"head\">\r\n        <label>{props.index + 1}</label>\r\n        <strong>{str}</strong>\r\n        <span><b>{props.date}</b></span>\r\n      </div>\r\n      <div className=\"desc\">\r\n        {props.description}\r\n      </div>\r\n      <div className=\"presenters\">\r\n        <h5>PresentedÂ by</h5>\r\n        {list}\r\n      </div>\r\n\r\n      <div className='upload'>\r\n        <form onSubmit={formSubmit}>\r\n          <i  className=\"boschicon-bosch-ic-cloud-upload\"></i>\r\n          <ReactTooltip id=\"uploadTip\" place=\"top\" effect=\"solid\">\r\n                Upload Attachments\r\n          </ReactTooltip>\r\n          <input data-tip data-for=\"uploadTip\" type=\"file\" name=\"files\" onChange={onChange} />\r\n          <div className=\"clear\"></div>\r\n        </form>\r\n      </div>\r\n      {resorc && resorc.length ?\r\n        <div className=\"resources\">\r\n          <i data-tip data-for=\"attachmentsTip\" className=\"boschicon-bosch-ic-book\" onClick={() => {\r\n            let newVal = showResources ? false : true;\r\n            setShowResources(newVal);\r\n          }}></i>\r\n          <ReactTooltip id=\"attachmentsTip\" place=\"top\" effect=\"solid\">\r\n                View Attachments\r\n          </ReactTooltip>\r\n        </div> : null}\r\n      <div >{showResources ? download : null}</div>\r\n\r\n\r\n      <div>{(new Date(props.date) > new Date() ) ? emailicon: null}</div>\r\n      <div className=\"clear\"></div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PostCard;\r\n"]},"metadata":{},"sourceType":"module"}