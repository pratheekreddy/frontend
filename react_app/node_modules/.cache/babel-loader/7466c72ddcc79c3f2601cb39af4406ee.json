{"ast":null,"code":"import _slicedToArray from\"/home/user/projects/forumReact/react_app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import axios from'axios';import'./login.scss';var Login=function Login(props){console.log(props);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showOTP=_useState2[0],setshowOTP=_useState2[1];var email='';var otp='';var header='';// console.log(props)\nvar getOtp=function getOtp(){// console.log('getotp')\nemail=document.getElementById('email').value;var post=axios.get('https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/user/auth/otp?user='+email);post.then(function(result){console.log(result);// email = '';\n// otp = '';\nsetshowOTP(true);alert(result.data.msg);}).catch(function(e){console.log(e);});};var validateOtp=function validateOtp(){var user=document.getElementById('email').value;otp=document.getElementById('otp').value;// console.log(user)\n// console.log('validate otp')\nvar post=axios.post('https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/user/auth/login',{user:user,otp:otp});post.then(function(result){// console.log(result)\nif(result.status===200){header=result.data.token;props.history.push({pathname:'/landing'});localStorage.setItem('token',header);}else{alert(result.data.msg);}console.log(header);}).catch(function(e){console.log(e);});};var emailContainer=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"E-mail:\"),/*#__PURE__*/React.createElement(\"input\",{disabled:showOTP,id:\"email\",type:\"text\"}),!showOTP?/*#__PURE__*/React.createElement(\"button\",{className:\"rb-button rb-button--primary\",onClick:getOtp},\"Get OTP\"):null),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));var otpContainer=/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"label\",null,\"OTP:\"),/*#__PURE__*/React.createElement(\"input\",{type:\"text\",id:\"otp\",placeholder:\"Enter your OTP\"}),/*#__PURE__*/React.createElement(\"button\",{className:\"rb-button rb-button--primary\",onClick:validateOtp},\"Login\")),/*#__PURE__*/React.createElement(\"div\",{className:\"clear\"}));return/*#__PURE__*/React.createElement(\"div\",{className:\"login\"},emailContainer,showOTP?otpContainer:null);};export default Login;","map":{"version":3,"sources":["/home/user/projects/forumReact/react_app/src/login/login.js"],"names":["React","useState","axios","Login","props","console","log","showOTP","setshowOTP","email","otp","header","getOtp","document","getElementById","value","post","get","then","result","alert","data","msg","catch","e","validateOtp","user","status","token","history","push","pathname","localStorage","setItem","emailContainer","otpContainer"],"mappings":"+JAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,MAAO,cAAP,CACA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACrBC,OAAO,CAACC,GAAR,CAAYF,KAAZ,EADqB,cAESH,QAAQ,CAAC,KAAD,CAFjB,wCAEdM,OAFc,eAELC,UAFK,eAGrB,GAAIC,CAAAA,KAAK,CAAG,EAAZ,CACA,GAAIC,CAAAA,GAAG,CAAG,EAAV,CACA,GAAIC,CAAAA,MAAM,CAAG,EAAb,CACA;AACA,GAAIC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACf;AACAH,KAAK,CAACI,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAAvC,CACA,GAAMC,CAAAA,IAAI,CAAGd,KAAK,CAACe,GAAN,CAAU,8FAA8FR,KAAxG,CAAb,CACAO,IAAI,CAACE,IAAL,CAAU,SAACC,MAAD,CAAY,CAClBd,OAAO,CAACC,GAAR,CAAYa,MAAZ,EACA;AACA;AACAX,UAAU,CAAC,IAAD,CAAV,CACAY,KAAK,CAACD,MAAM,CAACE,IAAP,CAAYC,GAAb,CAAL,CACH,CAND,EAMGC,KANH,CAMS,SAACC,CAAD,CAAO,CACZnB,OAAO,CAACC,GAAR,CAAYkB,CAAZ,EACH,CARD,EASH,CAbD,CAeA,GAAIC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACpB,GAAIC,CAAAA,IAAI,CAACb,QAAQ,CAACC,cAAT,CAAwB,OAAxB,EAAiCC,KAA1C,CACAL,GAAG,CAACG,QAAQ,CAACC,cAAT,CAAwB,KAAxB,EAA+BC,KAAnC,CACA;AACA;AACA,GAAMC,CAAAA,IAAI,CAAGd,KAAK,CAACc,IAAN,CAAW,yFAAX,CAAsG,CAC/GU,IAAI,CAAJA,IAD+G,CACzGhB,GAAG,CAAHA,GADyG,CAAtG,CAAb,CAGAM,IAAI,CAACE,IAAL,CAAU,SAACC,MAAD,CAAY,CAClB;AACA,GAAIA,MAAM,CAACQ,MAAP,GAAkB,GAAtB,CAA2B,CACvBhB,MAAM,CAAGQ,MAAM,CAACE,IAAP,CAAYO,KAArB,CACAxB,KAAK,CAACyB,OAAN,CAAcC,IAAd,CAAmB,CAACC,QAAQ,CAAC,UAAV,CAAnB,EACAC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA6BtB,MAA7B,EACH,CAJD,IAKI,CACAS,KAAK,CAACD,MAAM,CAACE,IAAP,CAAYC,GAAb,CAAL,CACH,CACDjB,OAAO,CAACC,GAAR,CAAYK,MAAZ,EACH,CAXD,EAWGY,KAXH,CAWS,SAACC,CAAD,CAAO,CACZnB,OAAO,CAACC,GAAR,CAAYkB,CAAZ,EACH,CAbD,EAcH,CAtBD,CAuBA,GAAIU,CAAAA,cAAc,cACd,4CACI,4CACI,2CADJ,cAEI,6BAAO,QAAQ,CAAE3B,OAAjB,CAA0B,EAAE,CAAC,OAA7B,CAAqC,IAAI,CAAC,MAA1C,EAFJ,CAGK,CAACA,OAAD,cAAY,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,OAAO,CAAEK,MAA1D,YAAZ,CAAkG,IAHvG,CADJ,cAMI,2BAAK,SAAS,CAAC,OAAf,EANJ,CADJ,CAUA,GAAIuB,CAAAA,YAAY,cACZ,4CACI,4CACI,wCADJ,cAEI,6BAAO,IAAI,CAAC,MAAZ,CAAmB,EAAE,CAAC,KAAtB,CAA4B,WAAW,CAAC,gBAAxC,EAFJ,cAGI,8BAAQ,SAAS,CAAC,8BAAlB,CAAiD,OAAO,CAAEV,WAA1D,UAHJ,CADJ,cAMI,2BAAK,SAAS,CAAC,OAAf,EANJ,CADJ,CAWA,mBACI,2BAAK,SAAS,CAAC,OAAf,EACKS,cADL,CAEK3B,OAAO,CAAG4B,YAAH,CAAkB,IAF9B,CADJ,CAMH,CAxED,CA0EA,cAAehC,CAAAA,KAAf","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from 'axios'\r\n\r\nimport './login.scss'\r\nconst Login = (props) => {\r\n    console.log(props)\r\n    const [showOTP, setshowOTP] = useState(false);\r\n    let email = ''\r\n    let otp = ''\r\n    let header = ''\r\n    // console.log(props)\r\n    let getOtp = () => {\r\n        // console.log('getotp')\r\n        email=document.getElementById('email').value\r\n        const post = axios.get('https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/user/auth/otp?user='+email);\r\n        post.then((result) => {\r\n            console.log(result);\r\n            // email = '';\r\n            // otp = '';\r\n            setshowOTP(true);\r\n            alert(result.data.msg)\r\n        }).catch((e) => {\r\n            console.log(e)\r\n        })\r\n    }\r\n\r\n    let validateOtp = () => {\r\n        let user=document.getElementById('email').value\r\n        otp=document.getElementById('otp').value\r\n        // console.log(user)\r\n        // console.log('validate otp')\r\n        const post = axios.post('https://0appkh5ipbo57270um-rbei-njs-forum.cfapps.eu10.hana.ondemand.com/user/auth/login', {\r\n            user, otp\r\n        });\r\n        post.then((result) => {\r\n            // console.log(result)\r\n            if (result.status === 200) {\r\n                header = result.data.token\r\n                props.history.push({pathname:'/landing'})\r\n                localStorage.setItem('token',header)\r\n            }\r\n            else{\r\n                alert(result.data.msg)\r\n            }\r\n            console.log(header)\r\n        }).catch((e) => {\r\n            console.log(e)\r\n        })\r\n    }\r\n    let emailContainer = (\r\n        <div>\r\n            <div>\r\n                <label >E-mail:</label>\r\n                <input disabled={showOTP} id=\"email\" type=\"text\" />\r\n                {!showOTP ? (<button className=\"rb-button rb-button--primary\" onClick={getOtp}>Get OTP</button>) : null}\r\n            </div>\r\n            <div className=\"clear\"></div>\r\n        </div>\r\n    )\r\n    let otpContainer = (\r\n        <div>\r\n            <div>\r\n                <label >OTP:</label>\r\n                <input type='text' id=\"otp\" placeholder=\"Enter your OTP\" />\r\n                <button className=\"rb-button rb-button--primary\" onClick={validateOtp}>Login</button>\r\n            </div>\r\n            <div className=\"clear\"></div>\r\n        </div>\r\n    )\r\n\r\n    return (\r\n        <div className='login'>\r\n            {emailContainer}\r\n            {showOTP ? otpContainer : null}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Login"]},"metadata":{},"sourceType":"module"}